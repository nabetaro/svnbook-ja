<appendix id="svn.webdav">
  <title>WebDAV et la gestion de versions automatique</title>

  <para>WebDAV est une extension de HTTP qui devient de plus en plus 
    courante comme standard pour le partage de fichiers. De nos jours, 
    les systèmes d'exploitation sont de plus en plus 
    <quote>connectés</quote> et beaucoup supportent maintenant 
    nativement le montage de <quote>partages</quote> mis à disposition
    par des serveurs WebDAV.</para>

  <para>Si vous utilisez Apache comme serveur réseau pour Subversion, on 
    peut dire que d'une certaine manière vous faites aussi tourner un 
    serveur WebDAV. Cette annexe donne quelques notions générales sur 
    ce protocole, la manière dont Subversion l'utilise et l'état actuel 
    de l'interopérabilité entre Subversion et d'autres logiciels 
    compatibles WebDAV.</para>


  <!-- ================================================================= -->
  <!-- ================================================================= -->
  <!-- ================================================================= -->
  <sect1 id="svn.webdav.basic">
    <title>À propos de WebDAV</title>

    <para><firstterm>DAV</firstterm> signifie
      <foreignphrase>Distributed Authoring and
      Versioning</foreignphrase>, que l'on pourrait traduire par 
      <quote>Écriture distribuée et gestion de versions</quote>. La 
      RFC&nbsp;2518 définit un ensemble de concepts et d'extensions sur 
      la base du protocole HTTP&nbsp;1.1 afin de faire du Web un 
      périphérique de lecture/écriture plus universel. L'idée est qu'un 
      serveur Web compatible WebDAV peut être considéré comme un serveur 
      de fichiers générique&nbsp;; les clients peuvent 
      <quote>monter</quote> des répertoires partagés, au-dessus d'une 
      couche HTTP, et ces répertoires se comportent pratiquement comme 
      les autres systèmes de fichiers en réseau (tels que NFS ou 
      SMB).</para>

    <para>Là où le bât blesse, c'est que, malgré l'acronyme, les 
      spécifications de la RFC ne décrivent en fait aucun façon
      d'assurer la gestion de versions.
      Les clients et serveurs WebDAV de base considèrent 
      que chaque fichier ou répertoire n'existe qu'en une seule version, 
      qui peut être ré-écrite autant de fois que l'on veut.</para>

    <para>Comme la RFC 2518 a ignoré les concepts de gestion de versions, 
      un autre groupe de travail a hérité de la responsabilité d'écrire 
      la RFC 3253 quelques années plus tard. La nouvelle RFC ajoute le 
      concept de gestion de versions à WebDAV, en rendant sa signification 
      au <quote>V</quote> de <quote>DAV</quote>, d'où le terme 
      <quote>DeltaV</quote>. Les clients et serveurs WebDAV/DeltaV sont 
      souvent appelés <quote>DeltaV</quote> tout court, puisque 
      DeltaV implique obligatoirement la prise en compte de 
      WebDAV.</para>

    <para>Le standard WebDAV initial a connu un grand succès. Tous les 
      systèmes d'exploitation modernes ont un client WebDAV intégré 
      (nous les verrons en détail plus tard) et de nombreux logiciels 
      sont également capables de communiquer via ce protocole&nbsp;: 
      Microsoft Office, Dreamweaver, Photoshop pour n'en citer que 
      quelques uns. Côté serveur, le serveur HTTP Apache dispose de 
      services WebDAV depuis 1998 et est considéré <foreignphrase>de
      facto</foreignphrase> comme la référence en matière de logiciel
      libre. Il existe plusieurs autres serveurs 
      WebDAV commerciaux, dont le propre serveur de Microsoft, 
      IIS.</para>

    <para>Malheureusement, DeltaV n'a pas connu autant de succès. Il est 
      très difficile de trouver des clients ou des serveurs DeltaV. Les 
      rares qui existent sont des serveurs commerciaux plus ou moins 
      inconnus&nbsp;; l'interopérabilité est donc très difficile
      à tester. Il n'est pas évident de trouver pourquoi 
      DeltaV n'a pas percé. Certains mettent en cause des spécifications 
      trop complexes. D'autres arguent du fait que, contrairement à 
      WebDAV, qui est une technologie de masse (même les utilisateurs les 
      moins férus d'informatique aiment à partager des fichiers 
      en réseau), ses fonctionnalités de gestion de versions intéressent 
      peu ou ne sont pas nécessaires à la majorité des gens. Enfin, 
      certains sont persuadés que DeltaV n'intéresse pas grand monde 
      parce qu'il n'existe aucun serveur libre qui l'implémente 
      correctement.</para>

    <para>Quand Subversion était encore en phase de conception, 
      l'utilisation d'Apache comme serveur réseau paraissait une très 
      bonne idée. Il possédait déjà un module pour fournir des services 
      WebDAV et DeltaV était une spécification relativement jeune. 
      L'idée était que le module serveur de Subversion 
      (<command>mod_dav_svn</command>) évoluerait pour devenir 
      l'implémentation libre de référence de DeltaV. Malheureusement, 
      DeltaV possède un modèle de gestion de versions très particulier, 
      qui n'est pas vraiment compatible avec le modèle de Subversion. 
      Certains concepts pouvaient être adaptés, mais d'autres non.</para>

    <para>Quelles conséquences en tirer&nbsp;?</para>

    <para>Premièrement, le client Subversion n'est pas un client DeltaV 
      complet. Il a besoin d'informations de la part du serveur que 
      DeltaV est incapable de lui fournir, ce qui implique qu'il dépend 
      en grande partie de requêtes
      HTTP <literal>REPORT</literal> spécifiques à Subversion que seul 
      <command>mod_dav_svn</command> sait interpréter.</para>

    <para>Deuxièmement, <command>mod_dav_svn</command> n'implémente pas 
      toutes les fonctionnalités d'un serveur DeltaV. De nombreux 
      éléments des spécifications du protocole DeltaV ne sont pas 
      pertinents dans le cas de Subversion et n'ont donc pas été 
      implémentés.</para>

    <para>Le débat est toujours d'actualité au sein de la communauté des 
      développeurs pour savoir si cela vaut la peine de combler ces 
      lacunes. Il serait irréaliste de modifier l'architecture de 
      Subversion pour rallier celle de DeltaV, et donc le client ne sera 
      sans doute jamais capable d'obtenir toutes les informations 
      nécessaires d'un serveur DeltaV. D'un autre côté,
      <command>mod_dav_svn</command> <emphasis>pourrait</emphasis> être 
      complété pour intégrer les fonctionnalités manquantes de DeltaV, 
      mais il est difficile de se motiver pour le faire&nbsp;: il 
      n'existe pratiquement aucun client DeltaV avec qui 
      communiquer.</para>

  </sect1>

  <!-- ================================================================= -->
  <!-- ================================================================= -->
  <!-- ================================================================= -->
  <sect1 id="svn.webdav.autoversioning">
    <title>Gestion de versions automatique</title>

    <para>Bien que le client Subversion ne soit pas un client DeltaV 
      complet et que le serveur Subversion n'implémente pas toutes les 
      fonctionnalités d'un serveur DeltaV, il faut se féliciter de 
      l'existence d'une petite lueur d'intéropérabilité WebDAV&nbsp;: la
      <firstterm>gestion de versions automatique</firstterm>.</para>

    <para>La gestion de versions automatique est une fonctionnalité 
      optionnelle définie dans le standard DeltaV. Un serveur DeltaV 
      classique n'autorisera pas un client WebDAV non compatible à 
      effectuer des opérations <literal>PUT</literal> sur un fichier 
      suivi en versions. Pour modifier un tel fichier, le serveur exige 
      un enchaînement précis de requêtes de gestion de versions&nbsp;: 
      quelque chose comme
      <literal>MKACTIVITY</literal>, <literal>CHECKOUT</literal>,
      <literal>PUT</literal>, <literal>CHECKIN</literal> 
      (c'est-à-dire&nbsp;: créer une activité, extraire le fichier 
      suivi en versions, renvoyer le fichier modifié et assortir cette 
      modification d'un commentaire). Mais si le serveur DeltaV supporte 
      la fonctionnalité de gestion de versions automatique, les requêtes 
      en écriture des clients WebDAV ordinaires sont acceptées. Le 
      serveur agit <emphasis>comme si</emphasis> le client avait envoyé 
      l'enchaînement de requêtes approprié, en faisant une propagation 
      <quote>sous le manteau</quote>. En d'autres termes, la gestion de 
      versions automatique permet à un serveur DeltaV de communiquer 
      avec des clients WebDAV ordinaires qui ne disposent pas de
      fonctionnalités de gestion de versions.</para>

    <para>Comme beaucoup de systèmes d'exploitation ont des clients 
      WebDAV intégrés, cette fonctionnalité est particulièrement 
      intéressante pour les administrateurs qui travaillent avec des 
      utilisateurs non techniciens. Imaginez un bureau avec des 
      utilisateurs <quote>ordinaires</quote> sous Microsoft Windows ou 
      Mac&nbsp;OS. Chaque utilisateur <quote>monte</quote> le dépôt 
      Subversion qui apparaît comme un lecteur réseau classique. Ils 
      utilisent le partage réseau comme ils l'ont toujours fait&nbsp;: 
      ils ouvrent les fichiers, les modifient et les sauvegardent. 
      Pendant ce temps, le serveur assure automatiquement la gestion de 
      versions. L'administrateur (ou tout autre utilisateur sachant le 
      faire) peut toujours utiliser un client Subversion pour effectuer 
      des requêtes sur l'historique des fichiers ou récupérer une 
      vieille version.</para>

    <para>Ce scénario n'est pas de la science-fiction&nbsp;: c'est du 
      concret, qui fonctionne depuis la version 1.2 de Subversion. Pour 
      activer la gestion de versions automatique dans
      <command>mod_dav_svn</command>, utilisez la directive 
      <literal>SVNAutoversioning</literal> dans le bloc
      <literal>Location</literal> du fichier 
      <filename>httpd.conf</filename>, comme dans l'exemple 
      suivant&nbsp;:</para>

    <screen>
&lt;Location /depot&gt;
  DAV svn
  SVNPath /var/svn/depot
  SVNAutoversioning on
&lt;/Location&gt;
</screen>

    <para>Quand la gestion de versions automatique de Subversion est 
      active, les requêtes en écriture des clients WebDAV sont 
      automatiquement transformées en propagations. Un message de 
      propagation générique est créé et associé automatiquement à chaque 
      révision.</para>

    <para>Cependant, avant d'activer cette fonctionnalité, comprenez 
      bien dans quoi vous vous engagez. Les clients WebDAV ont tendance 
      à effectuer <emphasis>beaucoup</emphasis> de requêtes en écriture, 
      ce qui engendre un nombre astronomique de propagations 
      automatiques. Par exemple, lors d'une sauvegarde d'un fichier, 
      beaucoup de clients effectuent un <literal>PUT</literal> pour un 
      fichier de 0&nbsp;octets (pour signifier qu'ils réservent le nom) 
      suivi par un autre <literal>PUT</literal> avec les données 
      effectives du fichier. La simple écriture d'un fichier entraîne 
      ainsi deux propagations distinctes. Tenez également compte du fait 
      que de nombreuses applications effectuent des sauvegardes 
      automatiques régulièrement, toutes les cinq minutes par exemple, 
      qui se traduisent par autant de propagations.</para>

    <para>Si vous avez une procédure automatique qui envoie un e-mail 
      après chaque propagation (<literal>post-commit</literal>), il est 
      conseillé de désactiver cet envoi soit complètement soit au moins 
      pour certaines parties du dépôt, selon que ces e-mails vous
      semblent apporter une plus-value ou pas. De plus, une 
      procédure automatique post-commit bien pensée peut distinguer une 
      propagation générée par la gestion de versions automatique d'une 
      propagation classique. L'astuce consiste à examiner la propriété 
      de révision dénommée <literal>svn:autoversioned</literal>. Si elle 
      est présente, la propagation est issue d'un client WebDAV 
      quelconque.</para>

    <para>Une autre caractéristique utile et complémentaire de la gestion
      de versions automatique de Subversion est fournie par le module 
      <literal>mod_mime</literal> d'Apache. Si un client WebDAV ajoute 
      un nouveau fichier au dépôt, l'utilisateur n'a pas l'occasion de 
      lui adjoindre la propriété <literal>svn:mime-type</literal>. Dans 
      ce cas, il se peut que, lors de la navigation dans un répertoire 
      partagé WebDAV, l'icône du fichier soit générique et qu'aucune 
      application ne soit associée à ce fichier. Une solution peut être 
      qu'un administrateur système (ou toute autre personne sachant 
      utiliser Subversion) extraie une copie de travail et définisse 
      manuellement la propriété <literal>svn:mime-type</literal> sur les 
      fichiers concernés. Mais c'est un peu comme tenter de remplir le 
      tonneau des Danaïdes, alors qu'il suffit de placer la directive
      <literal>ModMimeUsePathInfo</literal> dans le bloc 
      <literal>&lt;Location&gt;</literal> de Subversion.</para>

    <screen>
&lt;Location /depot&gt;
  DAV svn
  SVNPath /var/svn/depot
  SVNAutoversioning on

  ModMimeUsePathInfo on

&lt;/Location&gt;
</screen>

    <para>Cette directive autorise <literal>mod_mime</literal> à déduire 
      automatiquement le type MIME des nouveaux fichiers qui entrent 
      dans le dépôt de la gestion de versions automatique. Ce module
      examine l'extension du nom de fichier et éventuellement le contenu
      de celui-ci&nbsp;; si certains motifs sont repérés, la propriété
      <literal>svn:mime-type</literal> est automatiquement 
      renseignée.</para>

  </sect1>

  <!-- ================================================================= -->
  <!-- ================================================================= -->
  <!-- ================================================================= -->
  <sect1 id="svn.webdav.clients">
    <title>Interopérabilité des clients</title>

    <para>Les clients WebDAV peuvent être classés en trois 
      catégories&nbsp;: applications autonomes, greffons pour 
      explorateurs de fichiers et implémentations de systèmes de 
      fichiers. Ces catégories définissent grosso modo les types de 
      fonctionnalités WebDAV offertes aux utilisateurs. Le 
      <xref linkend="svn.webdav.clients.tbl-1"/> contient notre 
      répartition en catégories et fournit une brève description des 
      principaux logiciels compatibles WebDAV. Vous trouverez plus 
      d'informations sur ces logiciels, ainsi que sur les catégories 
      auxquelles ils appartiennent, dans les sections à suivre.</para>

    <table id="svn.webdav.clients.tbl-1">
      <title>Principaux clients WebDAV</title>
      <tgroup cols="6">
        <thead>
          <row>
            <entry>Logiciel</entry>
            <entry>Type</entry>
            <entry>Windows</entry>
            <entry>Mac</entry>
            <entry>Linux</entry>
            <entry>Description</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>Adobe Photoshop</entry>
            <entry>Application WebDAV autonome</entry>
            <entry>X</entry>
            <entry></entry>
            <entry></entry>
            <entry>Logiciel de retouche d'images, capable d'accéder 
              directement à des URL WebDAV, en lecture et en 
              écriture</entry>
          </row>
          <row>
            <entry>cadaver</entry>
            <entry>Application WebDAV autonome</entry>
            <entry></entry>
            <entry>X</entry>
            <entry>X</entry>
            <entry>Client WebDAV en ligne de commande, supportant des 
              opérations de transfert de fichiers, d'arborescences et de 
              verrouillage</entry>
          </row>
          <row>
            <entry>DAV Explorer</entry>
            <entry>Application WebDAV autonome</entry>
            <entry>X</entry>
            <entry>X</entry>
            <entry>X</entry>
            <entry>Interface graphique en Java dont le but est de 
              parcourir des partages WebDAV</entry>
          </row>
          <row>
            <entry>Adobe Dreamweaver</entry>
            <entry>Application WebDAV autonome</entry>
            <entry>X</entry>
            <entry></entry>
            <entry></entry>
            <entry>Logiciel de création Web, capable d'accéder 
              directement à des URL WebDAV, en lecture et en 
              écriture</entry>
          </row>
          <row>
            <entry>Microsoft Office</entry>
            <entry>Application WebDAV autonome</entry>
            <entry>X</entry>
            <entry></entry>
            <entry></entry>
            <entry>Suite bureautique dont plusieurs composants sont 
              capables d'accéder directement à des URL WebDAV, en 
              lecture et en écriture</entry>
          </row>
          <row>
            <entry>Dossiers Web de Microsoft</entry>
            <entry>Greffon WebDAV pour explorateur de fichiers</entry>
            <entry>X</entry>
            <entry></entry>
            <entry></entry>
            <entry>Explorateur de fichiers avec interface graphique 
              capable d'effectuer des opérations sur les arborescences 
              de partages WebDAV</entry>
          </row>
          <row>
            <entry>GNOME Nautilus</entry>
            <entry>Greffon WebDAV pour explorateur de fichiers</entry>
            <entry></entry>
            <entry></entry>
            <entry>X</entry>
            <entry>Explorateur de fichiers avec interface graphique 
              capable d'effectuer des opérations sur les arborescences 
              de partages WebDAV</entry>
          </row>
          <row>
            <entry>KDE Konqueror</entry>
            <entry>Greffon WebDAV pour explorateur de fichiers</entry>
            <entry></entry>
            <entry></entry>
            <entry>X</entry>
            <entry>Explorateur de fichiers avec interface graphique 
              capable d'effectuer des opérations sur les arborescences 
              de partages WebDAV</entry>
          </row>
          <row>
            <entry>Mac OS X</entry>
            <entry>Implémentation d'un système de fichiers WebDAV</entry>
            <entry></entry>
            <entry>X</entry>
            <entry></entry>
            <entry>Système d'exploitation capable de monter des partages 
              WebDAV nativement</entry>
          </row>
          <row>
            <entry>Novell NetDrive</entry>
            <entry>Implémentation d'un système de fichiers WebDAV</entry>
            <entry>X</entry>
            <entry></entry>
            <entry></entry>
            <entry>Logiciel qui permet d'affecter des partages réseaux 
              WebDAV à des lecteurs réseaux Windows</entry>
          </row>
          <row>
            <entry>SRT WebDrive</entry>
            <entry>Implémentation d'un système de fichiers WebDAV</entry>
            <entry>X</entry>
            <entry></entry>
            <entry></entry>
            <entry>Logiciel de transfert de fichiers qui, entre autres 
              choses, permet d'affecter des partages réseaux WebDAV à 
              des lecteurs réseaux Windows</entry>
          </row>
          <row>
            <entry>davfs2</entry>
            <entry>Implémentation d'un système de fichiers WebDAV</entry>
            <entry></entry>
            <entry></entry>
            <entry>X</entry>
            <entry>Pilote de système de fichiers Linux qui permet de 
              monter des partages WebDAV</entry>
          </row>

        </tbody>
      </tgroup>
    </table>

    <!-- =============================================================== -->
    <sect2 id="svn.webdav.clients.standalone">
      <title>Applications WebDAV autonomes</title>

      <para>Une application WebDAV est un programme qui communique avec 
        un serveur WebDAV en utilisant les protocoles WebDAV. Nous 
        allons passer en revue les programmes les plus populaires dans 
        cette catégorie.</para>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.standalone.windows">
        <title>Microsoft Office, Dreamweaver, Photoshop</title> 

        <para>Sous Windows, plusieurs applications bien connues 
          intègrent nativement un client WebDAV, comme par exemple 
          Microsoft Office<footnote>
            <para>Microsoft a décidé de supprimer le support WebDAV 
              d'Access mais il existe toujours pour le reste de la suite 
              Office.</para>
          </footnote>,
          Photoshop d'Adobe et Dreamweaver. Ils sont capables d'accéder 
          à des URL WebDAV, à la fois en lecture et en écriture, et ont 
          tendance à faire un usage intensif des verrous WebDAV lors de 
          l'édition d'un fichier.</para>

        <para>Notez que bien que beaucoup de ces programmes fonctionnent 
          également sous Mac OS X, ils ne semblent pas directement 
          supporter WebDAV sur cette plate-forme. En fait, sous Mac 
          OS&nbsp;X, la boîte de dialogue
          <guimenu>Fichier&rarr;Ouvrir</guimenu> ne permet d'entrer 
          ni un chemin ni une URL. Il est probable que le support de 
          WebDAV ait été délibérément laissé de côté sur les versions 
          Macintosh de ces programmes, puisque le système de fichiers de 
          bas niveau d'OS&nbsp;X est déjà lui-même hautement compatible 
          avec WebDAV.</para>

      </sect3>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.standalone.free">
        <title>cadaver, DAV Explorer</title>

        <para><command>cadaver</command> (cadavre en français) est un 
          programme Unix rudimentaire en ligne de commande pour 
          parcourir et modifier des partages WebDAV. Comme le client 
          Subversion, il utilise la bibliothèque HTTP neon &mdash; ce 
          qui n'est pas surprenant puisque <literal>neon</literal> et 
          <command>cadaver</command> sont écrits par le même auteur. 
          <command>cadaver</command> est un logiciel libre (licence GPL) 
          disponible à l'adresse <ulink 
          url="http://www.webdav.org/cadaver/"/> (site en 
          anglais).</para>

        <para>L'utilisation de <command>cadaver</command> est similaire 
          à l'utilisation d'un programme FTP en ligne de commande et se 
          révèle donc extrêmement utile pour effectuer du débogage sur 
          WebDAV. Il peut être utilisé pour transférer rapidement 
          plusieurs fichiers du serveur vers son ordinateur ou de son 
          ordinateur vers le serveur, pour examiner les propriétés et 
          pour copier, déplacer, verrouiller ou déverrouiller les 
          fichiers&nbsp;:</para>

        <screen>
$ cadaver http://hote/depot
dav:/depot/&gt; ls
Listing collection `/depot/': succeeded.
Coll: &gt; machintruc                             0  May 10 16:19
      &gt; auteur.el                           2864  May  4 16:18
      &gt; preuve-en-poeme.txt                 1461  May  5 15:09
      &gt; cote-d-azur.jpg                    66737  May  5 15:09

dav:/depot/&gt; put LISEZMOI
Uploading LISEZMOI to `/depot/LISEZMOI':
Progress: [=============================&gt;] 100.0% of 357 bytes succeeded.

dav:/depot/&gt; get preuve-en-poeme.txt
Downloading `/depot/preuve-en-poeme.txt' to preuve-en-poeme.txt:
Progress: [=============================&gt;] 100.0% of 1461 bytes succeeded.
</screen>

        <para>DAV Explorer est un autre client WebDAV autonome, écrit en 
          Java. Il est sous une licence libre de type Apache et est 
          disponible à l'adresse 
          <ulink url="http://www.ics.uci.edu/~webdav/"/> (site en 
          anglais). Il peut faire tout ce que fait 
          <command>cadaver</command> et a l'avantage d'être portable, 
          ainsi que d'avoir une interface graphique plus conviviale. 
          C'est aussi un des premiers clients à supporter le nouveau 
          protocole <quote>WebDAV Access Control Protocol</quote> 
          (RFC 3744).</para>

        <para>Bien sûr, le fait que DAV&nbsp;Explorer supporte les 
          listes de contrôle d'accès (ACL) n'a aucun intérêt pour nous, 
          puisque <command>mod_dav_svn</command> ne les supporte pas. Le 
          support limité de certaines commandes DeltaV par 
          <command>cadaver</command> et DAV&nbsp;Explorer n'est pas 
          particulièrement utile non plus puisqu'ils n'autorisent pas 
          les requêtes <literal>MKACTIVITY</literal>. Mais cela n'est 
          pas pertinent de toute manière&nbsp;; nous considérons que 
          tous ces clients se connectent à des dépôts avec gestion de 
          versions automatique.</para>

      </sect3>
    </sect2>

    <!-- =============================================================== -->
    <sect2 id="svn.webdav.clients.file-explorer-extensions">
      <title>Greffons WebDAV pour explorateur de fichiers</title>

      <para>Certains explorateurs de fichiers avec interface graphique 
        bien connus disposent de greffons pour WebDAV qui permettent à 
        l'utilisateur de parcourir un partage DAV comme si c'était un 
        répertoire sur l'ordinateur local et d'effectuer des opérations 
        de base sur l'arborescence partagée. Par exemple, 
        Windows&nbsp;Explorer est capable de parcourir un serveur WebDAV 
        en tant qu'<quote>emplacement réseau</quote>. Les utilisateurs 
        peuvent glisser-déposer des fichiers depuis et vers le bureau, 
        ou peuvent renommer, copier ou effacer des fichiers comme 
        d'habitude. Mais comme cette fonctionnalité est propre à 
        l'explorateur de fichiers, le partage DAV n'est pas visible par 
        les applications ordinaires. Toutes les interactions DAV doivent 
        passer par l'intermédiaire de l'interface de 
        l'explorateur.</para>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.file-explorer-extensions.windows">
        <title>Dossiers Web de Microsoft</title>

        <para>Microsoft faisait partie du groupe de travail sur les 
          spécifications WebDAV et a commencé à livrer un client WebDAV 
          avec Windows&nbsp;98, sous le nom de 
          <quote>Dossiers&nbsp;Web</quote>. Ce client était également 
          livré avec Windows&nbsp;NT&nbsp;4.0 et 
          Windows&nbsp;2000.</para>

        <para>Le client originel <quote>Dossiers&nbsp;Web</quote> était 
          une extension de l'explorateur Windows, la principale 
          interface utilisée pour parcourir le système de fichiers. Il 
          fonctionne plutôt bien. Sous Windows&nbsp;98, l'extension doit 
          être explicitement installée si 
          <quote>Dossiers&nbsp;Web</quote> n'est pas visible dans 
          <quote>Mon&nbsp;Ordinateur</quote>. Sous Windows&nbsp;2000, 
          ajoutez simplement un nouveau <quote>Favori&nbsp;réseau</quote>, 
          entrez l'URL et le partage WebDAV apparaît, prêt à être 
          parcouru.</para>

        <para>Avec la sortie de Windows&nbsp;XP, Microsoft a commencé à 
          livrer une nouvelle version de <quote>Dossiers&nbsp;Web</quote>, 
          connue sous le nom de mini-redirecteur WebDAV. Cette nouvelle 
          implémentation est un client permettant au niveau du système 
          de fichiers de monter les partages WebDAV en tant que lecteurs 
          réseau. Malheureusement, cette implémentation est 
          incroyablement boguée. Le client essaie généralement de 
          convertir les URL HTTP (<literal>http://hote/depot</literal>)
          en notation UNC (<literal>\\hote\depot</literal>)&nbsp;; 
          il essaie aussi souvent d'utiliser l'authentification de 
          domaine Windows pour répondre aux défis d'authentification de 
          la méthode basic-auth d'HTTP en envoyant les identifiants sous 
          la forme <literal>HOTE\identifiant</literal>. Ces problèmes 
          d'interopérabilité sont graves et sont décrits un peu partout 
          sur le Web, à la grande frustration de beaucoup 
          d'utilisateurs. Même Greg Stein, l'auteur initial du module 
          Apache WebDAV, affirme sèchement que les 
          <quote>Dossiers&nbsp;Web</quote> de Windows&nbsp;XP ne peuvent 
          tout simplement pas fonctionner avec un serveur Apache.</para>

        <para>La version initiale des <quote>Dossiers&nbsp;Web</quote> 
          de Windows&nbsp;Vista semble être pratiquement la même que 
          celle de Windows&nbsp;XP et les problèmes sont donc les mêmes. 
          Avec de la chance, Microsoft corrigera ces problèmes dans un 
          Service Pack de Vista.</para>
          
        <para>Cependant, il semble qu'il existe des solutions de 
          contournement, à la fois pour XP et pour Vista, qui permettent 
          aux <quote>Dossiers&nbsp;Web</quote> de fonctionner avec un 
          serveur Apache. Les témoignages des utilisateurs de ces 
          solutions sont majoritairement positifs, c'est pourquoi nous 
          les signalons ici.</para>

        <para>Avec Windows&nbsp;XP, vous avez deux options&nbsp;: la 
          première, chercher sur le site Web de Microsoft le correctif 
          KB907306, <quote>Mise à jour de logiciels pour les dossiers 
          Web</quote>. Ceci devrait résoudre vos problèmes. Si ce n'est 
          pas le cas, il semble que la version originale pré-XP des 
          <quote>Dossiers&nbsp;Web</quote> soit toujours fournie avec le 
          système. Vous pouvez y accéder en allant sur 
          <quote>Favoris&nbsp;Réseau</quote> et en ajoutant un nouveau 
          <quote>Favori&nbsp;réseau</quote>. Quand le système vous 
          demande d'entrer une URL, saisissez l'URL du dépôt 
          <emphasis>en incluant un numéro de port</emphasis> dans cette 
          URL. Par exemple, vous devez entrer 
          <userinput>http://hote:80/depot</userinput> au lieu de 
          <userinput>http://hote/depot</userinput>. Répondez ensuite 
          avec vos identifiants Subversion à toute demande 
          d'authentification.</para>

        <para>Avec Windows Vista, le même correctif KB907306 devrait 
          faire l'affaire. Mais il est possible qu'il reste d'autres 
          problèmes. Certains utilisateurs rapportent que Vista 
          considère toute connexion <literal>http://</literal> comme non 
          sécurisée et fait donc échouer toute tentative 
          d'authentification avec Apache à moins que la connexion 
          n'utilise <literal>https://</literal>. Si vous ne pouvez pas 
          vous connecter à un dépôt Subversion en SSL, vous pouvez 
          modifier la base de registre du système pour inhiber ce 
          comportement. Changez uniquement la valeur de la clé 
          <literal>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters\BasicAuthLevel</literal>
          de <userinput>1</userinput> à <userinput>2</userinput>. Et 
          finalement, en guise d'avertissement&nbsp;: assurez-vous de 
          faire pointer votre favori réseau vers le répertoire racine du 
          dépôt (<filename>/</filename>), plutôt que vers un 
          sous-répertoire comme <filename>/trunk</filename>. Les 
          <quote>Dossiers&nbsp;Web</quote> de Vista semblent ne 
          fonctionner qu'avec les répertoires racines des dépôts.</para>

        <para>En général, et bien que ces astuces puissent vous 
          être utiles, vous serez peut-être mieux servi avec
          un client WebDAV tiers tel que WebDrive ou NetDrive.</para>

      </sect3>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.file-explorer-extensions.linux-de">
        <title>Nautilus, Konqueror</title>

        <para>Nautilus est l'explorateur/navigateur de fichiers officiel 
          du bureau GNOME (<ulink url="http://www.gnome.org"/>) et 
          Konqueror est l'explorateur/navigateur de fichiers officiel du 
          bureau KDE (<ulink url="http://www.kde.org"/>). Ces deux 
          applications disposent d'un client WebDAV intégré dans 
          l'explorateur de fichiers et elles peuvent se connecter sans 
          problème à un dépôt utilisant la gestion de versions 
          automatique.</para>

        <para>Dans Nautilus (GNOME), choisissez l'élément de menu 
          <guimenuitem>Fichier&rarr;Ouvrir un emplacement</guimenuitem> 
          et entrez l'URL dans la boîte de dialogue qui s'affiche. Le 
          dépôt s'affiche alors comme n'importe quel autre système de 
          fichiers.</para>

        <para>Dans Konqueror (KDE), vous devez utiliser la syntaxe 
          <literal>webdav://</literal> pour entrer une URL dans la barre 
          d'adresse. Si vous entrez une URL en 
          <literal>http://</literal>, Konqueror se comporte comme un 
          navigateur classique. Vous risquez alors de voir le contenu du 
          répertoire dans une page HTML classique produite par
          <command>mod_dav_svn</command>. Si vous entrez 
          <userinput>webdav://hote/depot</userinput> à la place de
          <userinput>http://hote/depot</userinput>, Konqueror devient un 
          client WebDAV et affiche le dépôt comme un système de 
          fichiers.</para>

      </sect3>
    </sect2>

    <sect2 id="svn.webdav.clients.fs-impl">
      <title>Implémentations de WebDAV en système de fichiers</title>

      <para>L'implémentation en système de fichiers peut être considérée 
        avec raison comme le meilleur type de client WebDAV. Il est 
        alors implanté en tant que module bas-niveau, généralement au 
        sein du noyau du système d'exploitation. Cela signifie qu'un 
        partage DAV est monté comme tout autre système de fichiers en 
        réseau, de la même manière qu'un partage NFS est monté sous 
        Unix ou qu'un lecteur réseau est affecté à un partage SMB sous 
        Windows. Au final, ce type de client fournit l'accès WebDAV en 
        lecture/écriture de manière transparente à tous les programmes. 
        Les applications ne sont même pas conscientes des requêtes 
        WebDAV qu'elles génèrent.</para>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.fs-impl.windows">
        <title>WebDrive, NetDrive</title>

        <para>WebDrive et NetDrive sont tous deux d'excellents produits 
          commerciaux qui permettent, sous Windows, d'affecter un 
          lecteur réseau à un partage WebDAV. Vous pouvez ainsi 
          effectuer des opérations sur ces pseudo-lecteurs WebDAV aussi 
          facilement et de la même manière que sur un disque dur local. 
          Vous pouvez vous procurer WebDrive auprès de South River 
          Technologies (<ulink url="http://www.southrivertech.com"/>).
          NetDrive de Novell est disponible gratuitement en ligne mais 
          exige d'avoir une licence Netware.</para>

      </sect3>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.fs-impl.macosx">
        <title>Mac OS X</title>

        <para>Le système d'exploitation OS&nbsp;X d'Apple possède un 
          client WebDAV intégré sous forme de système de fichiers. 
          Depuis Finder (l'explorateur de fichiers), choisissez l'élément
          de menu <guimenuitem>Go&rarr;Connect to Server</guimenuitem>.
          Entrez l'URL WebDAV et elle apparaît en tant que disque sur le 
          bureau, comme tout autre volume monté. Vous pouvez également 
          monter un partage WebDAV avec la commande 
          <command>mount</command> depuis le terminal Darwin, en 
          utilisant le type de système de fichiers
          <literal>webdav</literal>&nbsp;:</para>

        <screen>
$ mount -t webdav http://svn.exemple.com/depot/projet /mon/point/de/montage
$
</screen>

        <para>Notez que si votre module <command>mod_dav_svn</command> 
          est plus ancien que la version 1.2, OS&nbsp;X refuse de monter 
          le partage en lecture/écriture&nbsp;; il apparaît en lecture 
          seule. C'est parce que OS&nbsp;X exige le verrouillage pour 
          les partages en lecture/écriture, et la possibilité de 
          verrouiller des fichiers n'est apparue que dans 
          Subversion&nbsp;1.2.</para>

        <para>Par ailleurs, le client WebDAV d'OS&nbsp;X peut de temps 
          en temps se montrer très sensible aux redirections HTTP. Si 
          OS&nbsp;X est incapable de monter le dépôt, vous devrez 
          peut-être activer la directive <literal>BrowserMatch</literal>
          dans le fichier de configuration 
          <filename>httpd.conf</filename> du serveur Apache&nbsp;:</para>

        <screen>
BrowserMatch "^WebDAVFS/1.[012]" redirect-carefully
</screen>

      </sect3>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
      <sect3 id="svn.webdav.clients.fs-impl.linux">
        <title>davfs2 (Linux)</title>

        <para>davfs2 est un module de système de fichiers du noyau 
          Linux. Le projet est hébergé à l'adresse <ulink
          url="http://savannah.nongnu.org/projects/davfs2"/>. Une fois
          davfs2 installé, vous pouvez monter un partage réseau WebDAV
          en utilisant la commande <command>mount</command>
          habituelle de Linux&nbsp;:</para>

        <screen>
$ mount.davfs http://hote/depot /mnt/dav
</screen>

      </sect3>
    </sect2>
  </sect1>

</appendix>

<!--
local variables:
sgml-parent-document: ("book.xml" "appendix")
end:
-->
