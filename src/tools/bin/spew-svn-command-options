#!/usr/bin/env python
import sys
import os

tools = ['svn',
         'svnlook',
         'svnadmin',
         'svndumpfilter',
         'svnsync',
         ]

for tool in tools:
    # Find the subcommands for this tool.
    lines = os.popen("%s help" % (tool), 'r').readlines()
    found_header = 0
    subcommands = []
    for line in lines:
        line = line.rstrip()
        if not found_header:
            if line.startswith('Available subcommands:'):
                found_header = 1
            continue
        if not line:
            break
        subcommand = filter(None, line.split(' '))[0]
        subcommands.append(subcommand)

    # For each subcommand, find the options.
    subcommands.sort()
    for subcommand in subcommands:
        lines = os.popen("%s help %s" % (tool, subcommand), 'r').readlines()
        found_header = 0
        options = []
        for line in lines:
            line = line.rstrip()
            if not found_header:
                if line.startswith('Valid options:'):
                    found_header = 1
                continue
            if len(line) < 3:
                break
            if line[3] == ' ':
                continue
            option_parts = filter(None, line.split(' '))
            if option_parts[0].startswith('--'):
                option = option_parts[0]
            else:
                option = option_parts[1][1:-1]
            options.append(option)
            
        options.sort()
        for option in options:
            print "%s %s %s" % (tool, subcommand, option)
